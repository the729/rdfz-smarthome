# 人大附中智能家居项目例程

本项目硬件使用[Arduino Uno R3]开发板，配合[幻腾智能]通讯模块WMOD14。

[Arduino Uno R3]:<https://www.arduino.cc/en/Main/ArduinoBoardUno>
[幻腾智能]:<http://huantengsmart.com>

## 线路连接

WMOD14模块共有4个引脚，连接到Uno开发板的方式如下：

- GND：参考地，0电压。连接到Uno的任意一个标有GND的管脚即可。
- 5V:  5V电源。连接到Uno上Power分区的5V管脚上。
- RX:  模块的数据接收脚，连接到Uno上Digital分区的1管脚（TX）
- TX:  模块的数据发送脚，连接到Uno上Digital分区的0管脚（RX）

*特别注意*，TX和RX都是针对己方所述的。因此把两个电路板连接在一起时，TX和RX应该交叉连接。即“你发我收，你收我发”。

另一点*特别注意*：由于Uno通过电脑下载程序时，也需要使用串口，而串口已经被WMOD14占用。因此，每次下载程序的时候，都必须断开WMOD14模块的5V电源管脚，待下载完成后，重新连接5V管脚。如果不断开5V管脚，则下载不会成功。

## 调试操作

请按下面的步骤进行。

- 使用手机浏览器访问[幻腾智能]官网：http://huantengsmart.com
- 点击左上角菜单，点击“我的模块”
- 如果还没有登陆幻腾账号，则请登录。如果还没有注册幻腾账号，可以使用手机号进行注册。如果已经注册了账号，但忘记了密码，也可以使用手机验证码找回密码。
- 在“我的模块”页面中会列出您的账号中所有已经添加的WMOD14模块列表。如果需要添加新的模块，则请将模块贴纸上的条形码数字输入，并点击添加。
- 选择要调试的模块，点击调试
- 选择具体的调试功能：开关操控、数据反馈、数据发送
- 在调试页面，可以自定义每个操作控件的提示文字。修改满意后，可以通过浏览器的收藏夹收藏当前的页面，这样下次通过收藏夹访问页面，就是已经调整后的文字了。

已经添加到别人账号中的模块，不能再次添加，必须从别人账号中解除绑定。目前，如果需要解除绑定，只能联系幻腾智能客服工作人员。

## 幻腾联系方式

客服电话：400-622-8606

---

# 示例程序说明

## 示例程序demo1-led

demo1程序可以通过手机页面控制2个管脚的电平，以及1个管脚的PWM输出。

- P13: 这个管脚也是Uno开发板上的L指示灯。P13高电平的同时，L指示灯也会亮起，因此并不需要在P13脚外接LED。使用实例程序，打开或关闭“开关0”即可开关开发板上的L指示灯。
- P12: 外接一个LED（阳极接P12，阴极接GND），使用实例程序，打开或关闭“开关1”即可开关外接LED指示灯。
- P11: 模拟（PWM）输出，可以设置0-100的数值，表示PWM的占空比，如果接LED，相当于亮度的百分比。外接一个LED（阳极接P11，阴极接GND），使用实例程序，在“配置数据”中输入数值，点击发送，即可设置外接LED的亮度百分比。

## 示例程序demo2-digital-input

demo2程序可以把连接在P10管脚上的数字量读取并反馈在手机界面上。当P10管脚为高电平是，显示100；低电平时，显示0。每当P10状态改变时，开发板的L指示灯都会改变状态。

连接线路时，首先选用一个开关量传感器，例如PIR人体运动传感器。将传感器电源连接到5V和GND上，信号线连接在P10管脚上即可。

## 示例程序demo3-analog-input

demo3程序可以把连接在Analog 5管脚上的模拟信号采集反馈到手机上。大约每1-2秒，程序会采集5管脚的模拟信号，经过ADC转换为0-4095的数值，并传送到手机上。每次采样前，开发板的L指示灯也会改变一次状态。

连接线路时，首先选用一个模拟量传感器，例如模拟角度传感器。将传感器的电源连接到5V和GND上，信号线连接在Uno开发板的模拟输入引脚中的5号即可。
